{
  "@context": "https://atp.dev/schema/v1",
  "@type": "AgentManifest",
  "name": "Acme Store",
  "description": "Online electronics retailer with 50,000+ products. Search, browse, and purchase consumer electronics, accessories, and smart home devices.",
  "version": "1.0.0",
  "provider": {
    "name": "Acme Corp",
    "url": "https://acme.com",
    "contact": "api@acme.com",
    "logo": "https://acme.com/logo.png"
  },
  "auth": {
    "schemes": [
      {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "https://acme.com/oauth/authorize",
            "tokenUrl": "https://acme.com/oauth/token",
            "refreshUrl": "https://acme.com/oauth/refresh",
            "scopes": {
              "read:products": "Browse and search the product catalog",
              "read:reviews": "Read product reviews and ratings",
              "write:cart": "Add, remove, and modify shopping cart items",
              "read:orders": "View order history and tracking information",
              "write:orders": "Place new orders and modify existing ones",
              "read:profile": "View user profile and saved addresses",
              "write:profile": "Update user profile and preferences"
            }
          }
        }
      },
      {
        "type": "apiKey",
        "in": "header",
        "name": "X-Agent-Key",
        "registration": "https://acme.com/developer/register"
      }
    ],
    "agentIdentity": {
      "required": true,
      "format": "did:web"
    }
  },
  "rateLimit": {
    "requests": 1000,
    "window": "1h",
    "burstLimit": 50,
    "tierUrl": "https://acme.com/developer/pricing"
  },
  "capabilities": [
    {
      "id": "search-products",
      "name": "Search Products",
      "description": "Full-text search across the product catalog. Supports filtering by category, price range, brand, rating, and availability. Returns paginated results sorted by relevance.",
      "semanticType": "commerce:product-search",
      "endpoint": "/api/v1/products/search",
      "method": "GET",
      "parameters": [
        {
          "name": "q",
          "type": "string",
          "required": true,
          "description": "Search query (natural language or keywords)"
        },
        {
          "name": "category",
          "type": "string",
          "enum": ["electronics", "accessories", "smart-home", "computers", "audio", "gaming"],
          "description": "Product category filter"
        },
        {
          "name": "price_min",
          "type": "number",
          "minimum": 0,
          "description": "Minimum price in USD"
        },
        {
          "name": "price_max",
          "type": "number",
          "minimum": 0,
          "description": "Maximum price in USD"
        },
        {
          "name": "brand",
          "type": "string",
          "description": "Filter by brand name"
        },
        {
          "name": "min_rating",
          "type": "number",
          "minimum": 0,
          "maximum": 5,
          "description": "Minimum average rating (0-5)"
        },
        {
          "name": "in_stock",
          "type": "boolean",
          "default": true,
          "description": "Only show in-stock items"
        },
        {
          "name": "sort",
          "type": "string",
          "enum": ["relevance", "price_asc", "price_desc", "rating", "newest"],
          "default": "relevance",
          "description": "Sort order for results"
        },
        {
          "name": "page",
          "type": "integer",
          "default": 1,
          "minimum": 1,
          "description": "Page number for pagination"
        },
        {
          "name": "per_page",
          "type": "integer",
          "default": 20,
          "minimum": 1,
          "maximum": 100,
          "description": "Results per page"
        }
      ],
      "response": {
        "type": "object",
        "properties": {
          "results": {
            "type": "array",
            "items": { "$ref": "#/schemas/Product" }
          },
          "total": { "type": "integer" },
          "page": { "type": "integer" },
          "pages": { "type": "integer" }
        }
      },
      "requiredScopes": ["read:products"],
      "sideEffects": false
    },
    {
      "id": "get-product",
      "name": "Get Product Details",
      "description": "Retrieve full details for a specific product including description, specifications, images, pricing, and availability.",
      "semanticType": "commerce:product-read",
      "endpoint": "/api/v1/products/{product_id}",
      "method": "GET",
      "parameters": [
        {
          "name": "product_id",
          "type": "string",
          "required": true,
          "description": "Unique product identifier"
        }
      ],
      "response": { "$ref": "#/schemas/ProductDetail" },
      "requiredScopes": ["read:products"],
      "sideEffects": false
    },
    {
      "id": "get-reviews",
      "name": "Get Product Reviews",
      "description": "Retrieve customer reviews and ratings for a product. Supports sorting by recency, rating, or helpfulness.",
      "semanticType": "content:reviews-read",
      "endpoint": "/api/v1/products/{product_id}/reviews",
      "method": "GET",
      "parameters": [
        {
          "name": "product_id",
          "type": "string",
          "required": true
        },
        {
          "name": "sort",
          "type": "string",
          "enum": ["newest", "highest", "lowest", "helpful"],
          "default": "helpful"
        },
        {
          "name": "page",
          "type": "integer",
          "default": 1
        }
      ],
      "requiredScopes": ["read:reviews"],
      "sideEffects": false
    },
    {
      "id": "add-to-cart",
      "name": "Add to Cart",
      "description": "Add a product to the authenticated user's shopping cart. If the product is already in the cart, the quantity is incremented.",
      "semanticType": "commerce:cart-add",
      "endpoint": "/api/v1/cart/items",
      "method": "POST",
      "parameters": [
        {
          "name": "product_id",
          "type": "string",
          "required": true,
          "description": "Product to add"
        },
        {
          "name": "quantity",
          "type": "integer",
          "default": 1,
          "minimum": 1,
          "maximum": 99,
          "description": "Number of items to add"
        }
      ],
      "requiredScopes": ["write:cart"],
      "sideEffects": true,
      "confirmation": {
        "required": false
      }
    },
    {
      "id": "view-cart",
      "name": "View Cart",
      "description": "Retrieve the current contents of the user's shopping cart, including item details, quantities, and subtotal.",
      "semanticType": "commerce:cart-read",
      "endpoint": "/api/v1/cart",
      "method": "GET",
      "parameters": [],
      "requiredScopes": ["write:cart"],
      "sideEffects": false
    },
    {
      "id": "remove-from-cart",
      "name": "Remove from Cart",
      "description": "Remove a specific item from the user's shopping cart.",
      "semanticType": "commerce:cart-remove",
      "endpoint": "/api/v1/cart/items/{item_id}",
      "method": "DELETE",
      "parameters": [
        {
          "name": "item_id",
          "type": "string",
          "required": true,
          "description": "Cart item ID to remove"
        }
      ],
      "requiredScopes": ["write:cart"],
      "sideEffects": true,
      "confirmation": {
        "required": false
      }
    },
    {
      "id": "place-order",
      "name": "Place Order",
      "description": "Checkout and place an order for all items currently in the cart. This will charge the user's payment method and create a binding purchase order.",
      "semanticType": "commerce:order-create",
      "endpoint": "/api/v1/orders",
      "method": "POST",
      "parameters": [
        {
          "name": "shipping_address_id",
          "type": "string",
          "required": true,
          "description": "ID of a saved shipping address"
        },
        {
          "name": "payment_method_id",
          "type": "string",
          "required": true,
          "description": "ID of a saved payment method"
        },
        {
          "name": "shipping_method",
          "type": "string",
          "enum": ["standard", "express", "overnight"],
          "default": "standard",
          "description": "Shipping speed"
        },
        {
          "name": "gift_message",
          "type": "string",
          "description": "Optional gift message to include"
        }
      ],
      "requiredScopes": ["write:orders"],
      "sideEffects": true,
      "confirmation": {
        "required": true,
        "message": "This will charge the user's payment method and create a binding purchase order. The total amount will be shown before confirmation."
      }
    },
    {
      "id": "order-status",
      "name": "Check Order Status",
      "description": "Get the current status, tracking information, and estimated delivery date for an existing order.",
      "semanticType": "commerce:order-status",
      "endpoint": "/api/v1/orders/{order_id}",
      "method": "GET",
      "parameters": [
        {
          "name": "order_id",
          "type": "string",
          "required": true
        }
      ],
      "requiredScopes": ["read:orders"],
      "sideEffects": false
    }
  ],
  "workflows": [
    {
      "id": "purchase-flow",
      "name": "Product Purchase",
      "description": "Complete flow from product discovery to purchase: search for products, view details, add to cart, and checkout.",
      "steps": ["search-products", "get-product", "add-to-cart", "place-order"]
    },
    {
      "id": "research-flow",
      "name": "Product Research",
      "description": "Research products by searching, comparing details, and reading reviews â€” without purchasing.",
      "steps": ["search-products", "get-product", "get-reviews"]
    }
  ],
  "schemas": {
    "Product": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "price": { "type": "number" },
        "currency": { "type": "string", "default": "USD" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "brand": { "type": "string" },
        "rating": { "type": "number" },
        "review_count": { "type": "integer" },
        "in_stock": { "type": "boolean" },
        "image_url": { "type": "string", "format": "uri" },
        "url": { "type": "string", "format": "uri" }
      },
      "required": ["id", "name", "price", "currency"]
    },
    "ProductDetail": {
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "price": { "type": "number" },
        "currency": { "type": "string" },
        "description": { "type": "string" },
        "long_description": { "type": "string" },
        "category": { "type": "string" },
        "brand": { "type": "string" },
        "sku": { "type": "string" },
        "rating": { "type": "number" },
        "review_count": { "type": "integer" },
        "in_stock": { "type": "boolean" },
        "stock_quantity": { "type": "integer" },
        "images": { "type": "array", "items": { "type": "string", "format": "uri" } },
        "specifications": { "type": "object" },
        "related_products": { "type": "array", "items": { "type": "string" } }
      }
    }
  },
  "policies": {
    "training": "deny",
    "inference": "allow",
    "caching": {
      "allowed": true,
      "maxAge": 3600
    },
    "attribution": "preferred",
    "termsUrl": "https://acme.com/terms",
    "privacyUrl": "https://acme.com/privacy"
  }
}
